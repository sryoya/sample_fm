$("#result_songs").html("<%= j(render partial: 'results') %>")
if($(".result_song").length ==0){
  $("#result_songs").html("<%= j(render partial: 'no_results') %>")
}

$(".panel-body.center-block.none-display").removeClass("none-display")
$(".col-lg-4.col-md-4.col-sm-4.none-display").removeClass("none-display")

function playNextSong(next_scheduled_song_id){
  var next_playing_id = next_scheduled_song_id - 0 + 1;
  var next_audio = $('#song_num' + next_playing_id);
  if(next_audio.length != 0){
    next_audio[0].play();
  }else if($("audio").length != 0){
    playNextSong(next_playing_id)
  }
  $(this).parents("li.media.center-block").remove();
};

$("audio").on('ended', function(){
  var next_playing_id = $(this).attr('id').match(/[0-9]+\.?[0-9]*/g)[0] - 0 + 1;
  var next_audio = $('#song_num' + next_playing_id);
  if(next_audio.length != 0){
    next_audio[0].play();
  } else if($("audio").length != 0){
    playNextSong(next_playing_id)
  }
  $(this).parents("li.media.center-block").remove()
});

$("audio").on('play', function(){
  var other_audio = $("audio").not(this);
  $.each(other_audio, function(i, audio){
    audio.pause();
  });
});